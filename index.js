const _0x545c7c=_0x5d3b;(function(_0x116671,_0x40c680){const _0x25d8d0={_0xa0bc64:0x227,_0x1cafb5:0x20f,_0x581cf0:0x1e4,_0x52e04e:0x283,_0x1053c6:0x22c,_0x5ef176:0x211,_0x2cdd86:0x269,_0x13be2b:0x258,_0x1bfac0:0x203},_0x2be5c2=_0x5d3b,_0x2aaf3f=_0x116671();while(!![]){try{const _0x293017=-parseInt(_0x2be5c2(_0x25d8d0._0xa0bc64))/0x1*(parseInt(_0x2be5c2(_0x25d8d0._0x1cafb5))/0x2)+-parseInt(_0x2be5c2(_0x25d8d0._0x581cf0))/0x3*(-parseInt(_0x2be5c2(0x1de))/0x4)+parseInt(_0x2be5c2(_0x25d8d0._0x52e04e))/0x5+parseInt(_0x2be5c2(_0x25d8d0._0x1053c6))/0x6+-parseInt(_0x2be5c2(_0x25d8d0._0x5ef176))/0x7*(-parseInt(_0x2be5c2(_0x25d8d0._0x2cdd86))/0x8)+parseInt(_0x2be5c2(_0x25d8d0._0x13be2b))/0x9*(-parseInt(_0x2be5c2(0x278))/0xa)+parseInt(_0x2be5c2(_0x25d8d0._0x1bfac0))/0xb*(parseInt(_0x2be5c2(0x26e))/0xc);if(_0x293017===_0x40c680)break;else _0x2aaf3f['push'](_0x2aaf3f['shift']());}catch(_0x23d399){_0x2aaf3f['push'](_0x2aaf3f['shift']());}}}(_0x5978,0x8db23));const express=require(_0x545c7c(0x1fd)),app=express(),axios=require(_0x545c7c(0x1e0)),os=require('os'),fs=require('fs'),path=require(_0x545c7c(0x234)),{promisify}=require(_0x545c7c(0x221)),exec=promisify(require(_0x545c7c(0x25e))[_0x545c7c(0x207)]),{execSync}=require(_0x545c7c(0x25e)),UPLOAD_URL=process['env'][_0x545c7c(0x1f1)]||'',PROJECT_URL=process[_0x545c7c(0x276)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x545c7c(0x276)]['AUTO_ACCESS']||![],FILE_PATH=process['env']['FILE_PATH']||_0x545c7c(0x241),SUB_PATH=process[_0x545c7c(0x276)]['SUB_PATH']||'sub',PORT=process[_0x545c7c(0x276)][_0x545c7c(0x205)]||process[_0x545c7c(0x276)][_0x545c7c(0x222)]||0xbb8,UUID=process[_0x545c7c(0x276)][_0x545c7c(0x281)]||_0x545c7c(0x20c),NEZHA_SERVER=process[_0x545c7c(0x276)][_0x545c7c(0x24d)]||'',NEZHA_PORT=process[_0x545c7c(0x276)][_0x545c7c(0x1f7)]||'',NEZHA_KEY=process[_0x545c7c(0x276)][_0x545c7c(0x26f)]||'',ARGO_DOMAIN=process[_0x545c7c(0x276)]['ARGO_DOMAIN']||_0x545c7c(0x236),ARGO_AUTH=process[_0x545c7c(0x276)][_0x545c7c(0x260)]||'eyJhIjoiNTU3MzExOWI0OGE4OGNhYzhiOTYxOTQ0NGU1MDUwMzgiLCJ0IjoiZDM2N2FkMDAtNzY4MS00ZTkxLTkyZDgtNzBiZGNlNGQ1YzM1IiwicyI6IlpHRXdZMlkyT1dJdE1qTmpaUzAwTkdWaExUa3paRGd0WldJeVlqSmxaV1ppWkRrdyJ9',ARGO_PORT=process['env'][_0x545c7c(0x285)]||0x1f41,CFIP=process['env']['CFIP']||'cdns.doon.eu.org',CFPORT=process[_0x545c7c(0x276)][_0x545c7c(0x25c)]||0x1bb,NAME=process[_0x545c7c(0x276)][_0x545c7c(0x288)]||_0x545c7c(0x286);!fs[_0x545c7c(0x224)](FILE_PATH)?(fs[_0x545c7c(0x243)](FILE_PATH),console[_0x545c7c(0x217)](FILE_PATH+'\x20is\x20created')):console['log'](FILE_PATH+_0x545c7c(0x253));function generateRandomName(){const _0x4eecd6={_0x426552:0x215},_0x230e11=_0x545c7c,_0x4d4763=_0x230e11(0x255);let _0x43f670='';for(let _0x301ea6=0x0;_0x301ea6<0x6;_0x301ea6++){_0x43f670+=_0x4d4763[_0x230e11(0x28a)](Math['floor'](Math[_0x230e11(_0x4eecd6._0x426552)]()*_0x4d4763['length']));}return _0x43f670;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x5d3b(_0x39c922,_0x1074eb){const _0x59785b=_0x5978();return _0x5d3b=function(_0x5d3b4c,_0x492cbe){_0x5d3b4c=_0x5d3b4c-0x1d5;let _0x2e05ca=_0x59785b[_0x5d3b4c];return _0x2e05ca;},_0x5d3b(_0x39c922,_0x1074eb);}let npmPath=path[_0x545c7c(0x235)](FILE_PATH,npmName),phpPath=path[_0x545c7c(0x235)](FILE_PATH,phpName),webPath=path[_0x545c7c(0x235)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x545c7c(0x1df)),listPath=path[_0x545c7c(0x235)](FILE_PATH,_0x545c7c(0x1f0)),bootLogPath=path[_0x545c7c(0x235)](FILE_PATH,_0x545c7c(0x21d)),configPath=path[_0x545c7c(0x235)](FILE_PATH,_0x545c7c(0x24f));function deleteNodes(){const _0x4d7da7={_0x46737f:0x1f2,_0x45108e:0x239,_0x30d8c6:0x21c},_0x5a43df=_0x545c7c;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x51fee3;try{_0x51fee3=fs[_0x5a43df(0x1e6)](subPath,_0x5a43df(_0x4d7da7._0x46737f));}catch{return null;}const _0x182590=Buffer[_0x5a43df(0x1dc)](_0x51fee3,_0x5a43df(0x1fe))[_0x5a43df(0x1eb)](_0x5a43df(0x1f2)),_0x5259e7=_0x182590['split']('\x0a')[_0x5a43df(0x23e)](_0x43bffe=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5a43df(0x268)](_0x43bffe));if(_0x5259e7[_0x5a43df(0x1e5)]===0x0)return;return axios['post'](UPLOAD_URL+_0x5a43df(_0x4d7da7._0x45108e),JSON[_0x5a43df(0x1db)]({'nodes':_0x5259e7}),{'headers':{'Content-Type':_0x5a43df(0x23d)}})[_0x5a43df(_0x4d7da7._0x30d8c6)](_0x43370d=>{return null;}),null;}catch(_0x32689a){return null;}}function cleanupOldFiles(){const _0x448dc3={_0x2afe67:0x204},_0x363931={_0x2bcaf4:0x235,_0x58a8c7:0x229,_0x48ed8d:0x20a},_0x44cc85=_0x545c7c;try{const _0xb3fd22=fs[_0x44cc85(0x1dd)](FILE_PATH);_0xb3fd22[_0x44cc85(_0x448dc3._0x2afe67)](_0xf2554e=>{const _0x5815a7=_0x44cc85,_0x21fbb9=path[_0x5815a7(_0x363931._0x2bcaf4)](FILE_PATH,_0xf2554e);try{const _0x5e7974=fs[_0x5815a7(_0x363931._0x58a8c7)](_0x21fbb9);_0x5e7974[_0x5815a7(0x265)]()&&fs[_0x5815a7(_0x363931._0x48ed8d)](_0x21fbb9);}catch(_0x446bf2){}});}catch(_0x571e0b){}}app[_0x545c7c(0x200)]('/',function(_0x41f053,_0x17b0d4){const _0x33f103={_0x8af9b5:0x27a},_0x29cdcc=_0x545c7c;_0x17b0d4[_0x29cdcc(_0x33f103._0x8af9b5)](_0x29cdcc(0x1d6));});async function generateConfig(){const _0x53fde9={_0x1216ea:0x1e2,_0x3cadc:0x291,_0x4e9bb1:0x272,_0x913f49:0x1f3,_0x44c890:0x26a,_0x53434b:0x238,_0x511d70:0x1e2,_0x3a7a30:0x1f9,_0x28cf8a:0x230,_0x4a7249:0x225,_0x46dc41:0x279,_0x1074d0:0x282,_0x1e4086:0x235},_0x5a2561=_0x545c7c,_0x2795bc={'log':{'access':_0x5a2561(0x271),'error':_0x5a2561(0x271),'loglevel':_0x5a2561(_0x53fde9._0x1216ea)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x5a2561(0x1e2),'fallbacks':[{'dest':0xbb9},{'path':_0x5a2561(0x21b),'dest':0xbba},{'path':_0x5a2561(0x1e8),'dest':0xbbb},{'path':_0x5a2561(0x1f9),'dest':0xbbc}]},'streamSettings':{'network':_0x5a2561(0x290)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x5a2561(0x272),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbba,'listen':_0x5a2561(_0x53fde9._0x3cadc),'protocol':_0x5a2561(_0x53fde9._0x4e9bb1),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x5a2561(0x1e2),'wsSettings':{'path':_0x5a2561(0x21b)}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x5a2561(0x26a)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x5a2561(0x291),'protocol':_0x5a2561(_0x53fde9._0x913f49),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x5a2561(0x1e8)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5a2561(0x270),_0x5a2561(_0x53fde9._0x44c890)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x5a2561(_0x53fde9._0x53434b),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x5a2561(_0x53fde9._0x511d70),'wsSettings':{'path':_0x5a2561(_0x53fde9._0x3a7a30)}},'sniffing':{'enabled':!![],'destOverride':[_0x5a2561(_0x53fde9._0x28cf8a),_0x5a2561(0x270),_0x5a2561(_0x53fde9._0x44c890)],'metadataOnly':![]}}],'dns':{'servers':[_0x5a2561(_0x53fde9._0x4a7249)]},'outbounds':[{'protocol':_0x5a2561(_0x53fde9._0x46dc41),'tag':_0x5a2561(0x22b)},{'protocol':'blackhole','tag':_0x5a2561(_0x53fde9._0x1074d0)}]};fs[_0x5a2561(0x21a)](path[_0x5a2561(_0x53fde9._0x1e4086)](FILE_PATH,'config.json'),JSON[_0x5a2561(0x1db)](_0x2795bc,null,0x2));}function getSystemArchitecture(){const _0x519ae3={_0xc57fff:0x219},_0x9134ca=_0x545c7c,_0x1bbc18=os[_0x9134ca(0x28d)]();return _0x1bbc18===_0x9134ca(0x23f)||_0x1bbc18===_0x9134ca(0x245)||_0x1bbc18===_0x9134ca(_0x519ae3._0xc57fff)?_0x9134ca(0x23f):'amd';}function downloadFile(_0x4fc7dd,_0x400b19,_0x14bd30){const _0x3f66dd={_0x104fdc:0x224,_0x34b0cc:0x243},_0x104035={_0x45cd68:0x220},_0x529f27={_0x512e64:0x22a},_0x555f05={_0x406d40:0x21e},_0x2e2186=_0x545c7c,_0x53cdf0=_0x4fc7dd;!fs[_0x2e2186(_0x3f66dd._0x104fdc)](FILE_PATH)&&fs[_0x2e2186(_0x3f66dd._0x34b0cc)](FILE_PATH,{'recursive':!![]});const _0x121948=fs['createWriteStream'](_0x53cdf0);axios({'method':'get','url':_0x400b19,'responseType':_0x2e2186(0x259)})['then'](_0x2376ac=>{const _0x398aa0={_0x5757c7:0x247,_0x1208fd:0x240},_0x44c6b5=_0x2e2186;_0x2376ac['data'][_0x44c6b5(0x20b)](_0x121948),_0x121948['on'](_0x44c6b5(0x275),()=>{const _0x1466e0=_0x44c6b5;_0x121948['close'](),console[_0x1466e0(0x217)]('Download\x20'+path[_0x1466e0(_0x555f05._0x406d40)](_0x53cdf0)+'\x20successfully'),_0x14bd30(null,_0x53cdf0);}),_0x121948['on'](_0x44c6b5(_0x529f27._0x512e64),_0x5ae65a=>{const _0x172a78=_0x44c6b5;fs['unlink'](_0x53cdf0,()=>{});const _0x51225a=_0x172a78(0x220)+path['basename'](_0x53cdf0)+_0x172a78(_0x398aa0._0x5757c7)+_0x5ae65a[_0x172a78(_0x398aa0._0x1208fd)];console['error'](_0x51225a),_0x14bd30(_0x51225a);});})['catch'](_0x21b466=>{const _0x2a00aa=_0x2e2186,_0x575090=_0x2a00aa(_0x104035._0x45cd68)+path['basename'](_0x53cdf0)+_0x2a00aa(0x247)+_0x21b466[_0x2a00aa(0x240)];console['error'](_0x575090),_0x14bd30(_0x575090);});}async function downloadFilesAndRun(){const _0x382d1e={_0x59e141:0x217,_0x38f520:0x252,_0xdb754a:0x248,_0x1f0e1c:0x26c,_0x558774:0x27b,_0x5a2de1:0x22e,_0x11786d:0x1fb,_0x5b7767:0x254,_0x141de1:0x21a,_0x41abb6:0x1ea,_0x30c81c:0x1ee,_0x4f0d65:0x242,_0x400240:0x246,_0x4db268:0x287,_0x40dd8e:0x28b,_0x185059:0x237,_0x4b9f45:0x26d,_0x1ca0d7:0x277,_0x98e139:0x27c,_0x40ee95:0x224,_0x46cec6:0x28f,_0x5efe9c:0x208},_0x255bbe={_0x2e62fb:0x204},_0x202aa7=_0x545c7c,_0x32ca50=getSystemArchitecture(),_0x702f5f=getFilesForArchitecture(_0x32ca50);if(_0x702f5f[_0x202aa7(0x1e5)]===0x0){console[_0x202aa7(_0x382d1e._0x59e141)](_0x202aa7(0x1e1));return;}const _0x6d3251=_0x702f5f[_0x202aa7(_0x382d1e._0x38f520)](_0x4c0bcd=>{return new Promise((_0x499454,_0xcd6d33)=>{const _0x1e2f46=_0x5d3b;downloadFile(_0x4c0bcd[_0x1e2f46(0x27d)],_0x4c0bcd['fileUrl'],(_0x5df0fc,_0x1b98a8)=>{_0x5df0fc?_0xcd6d33(_0x5df0fc):_0x499454(_0x1b98a8);});});});try{await Promise[_0x202aa7(_0x382d1e._0xdb754a)](_0x6d3251);}catch(_0x509bd3){console[_0x202aa7(0x22a)](_0x202aa7(_0x382d1e._0x1f0e1c),_0x509bd3);return;}function _0x5ed25c(_0x51a467){const _0x28442c=_0x202aa7,_0x21d52b=0x1fd;_0x51a467[_0x28442c(_0x255bbe._0x2e62fb)](_0x9bc6c9=>{const _0x6e09c2={_0x1075e9:0x22a},_0xcb018d=_0x28442c;fs['existsSync'](_0x9bc6c9)&&fs[_0xcb018d(0x292)](_0x9bc6c9,_0x21d52b,_0x2ab984=>{const _0xeabc2e=_0xcb018d;_0x2ab984?console[_0xeabc2e(_0x6e09c2._0x1075e9)]('Empowerment\x20failed\x20for\x20'+_0x9bc6c9+':\x20'+_0x2ab984):console[_0xeabc2e(0x217)]('Empowerment\x20success\x20for\x20'+_0x9bc6c9+':\x20'+_0x21d52b[_0xeabc2e(0x1eb)](0x8));});});}const _0x5e5784=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x5ed25c(_0x5e5784);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x360479=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x202aa7(_0x382d1e._0x558774)]():'',_0x10510b=new Set([_0x202aa7(0x262),'8443',_0x202aa7(0x287),_0x202aa7(0x28b),_0x202aa7(0x27f),_0x202aa7(0x210)]),_0xf01125=_0x10510b[_0x202aa7(0x1ed)](_0x360479)?_0x202aa7(_0x382d1e._0x5a2de1):_0x202aa7(0x1d8),_0x13eff9=_0x202aa7(_0x382d1e._0x11786d)+NEZHA_KEY+_0x202aa7(_0x382d1e._0x5b7767)+NEZHA_SERVER+_0x202aa7(0x231)+_0xf01125+_0x202aa7(0x284)+UUID;fs[_0x202aa7(_0x382d1e._0x141de1)](path[_0x202aa7(0x235)](FILE_PATH,_0x202aa7(0x273)),_0x13eff9);const _0x20dc8b=_0x202aa7(_0x382d1e._0x41abb6)+phpPath+_0x202aa7(_0x382d1e._0x30c81c)+FILE_PATH+_0x202aa7(_0x382d1e._0x4f0d65);try{await exec(_0x20dc8b),console['log'](phpName+_0x202aa7(_0x382d1e._0x400240)),await new Promise(_0x10cd26=>setTimeout(_0x10cd26,0x3e8));}catch(_0x35a20e){console['error']('php\x20running\x20error:\x20'+_0x35a20e);}}else{let _0x1c166b='';const _0x1c8b6e=['443',_0x202aa7(0x226),_0x202aa7(_0x382d1e._0x4db268),_0x202aa7(_0x382d1e._0x40dd8e),_0x202aa7(0x27f),_0x202aa7(0x210)];_0x1c8b6e[_0x202aa7(_0x382d1e._0x185059)](NEZHA_PORT)&&(_0x1c166b=_0x202aa7(_0x382d1e._0x4b9f45));const _0x1d186a=_0x202aa7(0x1ea)+npmPath+_0x202aa7(_0x382d1e._0x1ca0d7)+NEZHA_SERVER+':'+NEZHA_PORT+_0x202aa7(_0x382d1e._0x98e139)+NEZHA_KEY+'\x20'+_0x1c166b+_0x202aa7(0x28c);try{await exec(_0x1d186a),console[_0x202aa7(_0x382d1e._0x59e141)](npmName+'\x20is\x20running'),await new Promise(_0x268bcc=>setTimeout(_0x268bcc,0x3e8));}catch(_0x5a20e3){console[_0x202aa7(0x22a)]('npm\x20running\x20error:\x20'+_0x5a20e3);}}}else console['log'](_0x202aa7(0x295));const _0x14ee0d=_0x202aa7(_0x382d1e._0x41abb6)+webPath+'\x20-c\x20'+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x14ee0d),console[_0x202aa7(0x217)](webName+'\x20is\x20running'),await new Promise(_0x3be1b3=>setTimeout(_0x3be1b3,0x3e8));}catch(_0x2068ad){console[_0x202aa7(0x22a)](_0x202aa7(0x1e9)+_0x2068ad);}if(fs[_0x202aa7(_0x382d1e._0x40ee95)](botPath)){let _0x42ca24;if(ARGO_AUTH[_0x202aa7(_0x382d1e._0x46cec6)](/^[A-Z0-9a-z=]{120,250}$/))_0x42ca24='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x202aa7(0x28f)](/TunnelSecret/)?_0x42ca24=_0x202aa7(_0x382d1e._0x5efe9c)+FILE_PATH+'/tunnel.yml\x20run':_0x42ca24=_0x202aa7(0x209)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x42ca24+'\x20>/dev/null\x202>&1\x20&'),console[_0x202aa7(_0x382d1e._0x59e141)](botName+_0x202aa7(0x246)),await new Promise(_0x52299c=>setTimeout(_0x52299c,0x7d0));}catch(_0x2e484f){console[_0x202aa7(0x22a)]('Error\x20executing\x20command:\x20'+_0x2e484f);}}await new Promise(_0x37f2cd=>setTimeout(_0x37f2cd,0x1388));}function getFilesForArchitecture(_0x56dc03){const _0x402391={_0x29f00d:0x23f,_0x35e1bb:0x261,_0x21a954:0x293,_0x202cf3:0x23c,_0x39c452:0x294,_0x4584e1:0x264},_0x256af1=_0x545c7c;let _0xb6cfa5;_0x56dc03===_0x256af1(_0x402391._0x29f00d)?_0xb6cfa5=[{'fileName':webPath,'fileUrl':_0x256af1(_0x402391._0x35e1bb)},{'fileName':botPath,'fileUrl':_0x256af1(0x1f8)}]:_0xb6cfa5=[{'fileName':webPath,'fileUrl':_0x256af1(0x256)},{'fileName':botPath,'fileUrl':_0x256af1(0x22f)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3f2d54=_0x56dc03===_0x256af1(0x23f)?_0x256af1(_0x402391._0x21a954):_0x256af1(_0x402391._0x202cf3);_0xb6cfa5[_0x256af1(_0x402391._0x39c452)]({'fileName':npmPath,'fileUrl':_0x3f2d54});}else{const _0x2a8e1e=_0x56dc03==='arm'?_0x256af1(0x24a):_0x256af1(_0x402391._0x4584e1);_0xb6cfa5['unshift']({'fileName':phpPath,'fileUrl':_0x2a8e1e});}}return _0xb6cfa5;}function argoType(){const _0x363d03={_0x4e0139:0x237,_0x29d00d:0x213,_0x2d871a:0x1d7,_0x588aaf:0x235,_0x5df314:0x202,_0x1d549c:0x1fc,_0x26aa7e:0x217},_0x1b6e9a=_0x545c7c;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x1b6e9a(_0x363d03._0x4e0139)](_0x1b6e9a(0x214))){fs[_0x1b6e9a(0x21a)](path[_0x1b6e9a(0x235)](FILE_PATH,_0x1b6e9a(0x202)),ARGO_AUTH);const _0x59e3dc='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x1b6e9a(_0x363d03._0x29d00d)]('\x22')[0xb]+_0x1b6e9a(_0x363d03._0x2d871a)+path[_0x1b6e9a(_0x363d03._0x588aaf)](FILE_PATH,_0x1b6e9a(_0x363d03._0x5df314))+_0x1b6e9a(0x296)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x1b6e9a(_0x363d03._0x1d549c);fs['writeFileSync'](path[_0x1b6e9a(_0x363d03._0x588aaf)](FILE_PATH,_0x1b6e9a(0x257)),_0x59e3dc);}else console[_0x1b6e9a(_0x363d03._0x26aa7e)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x1d935f={_0xc2bf3f:0x1e5,_0x4ca96f:0x217,_0x363dc8:0x25b,_0x28a395:0x20a,_0x12bd82:0x21d,_0x4a7913:0x1ec,_0xb88d50:0x201,_0x3901c4:0x246},_0x5d4b62={_0x591ad4:0x228,_0x163652:0x251,_0x18dcb1:0x200,_0x597b11:0x26b,_0x5be05d:0x24e,_0x15f113:0x251},_0x22c911={_0x5902db:0x1d9,_0x57e120:0x266,_0x164613:0x24b},_0x5f4a6f={_0x1ad321:0x250},_0x324188=_0x545c7c;let _0x3b1d8a;if(ARGO_AUTH&&ARGO_DOMAIN)_0x3b1d8a=ARGO_DOMAIN,console['log'](_0x324188(0x1ef),_0x3b1d8a),await _0x391b04(_0x3b1d8a);else try{const _0x105fc0=fs[_0x324188(0x1e6)](path['join'](FILE_PATH,'boot.log'),_0x324188(0x1f2)),_0x16e0c2=_0x105fc0[_0x324188(0x213)]('\x0a'),_0x4de96b=[];_0x16e0c2[_0x324188(0x204)](_0x229d06=>{const _0x4c0e89=_0x324188,_0x25ae16=_0x229d06['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x25ae16){const _0x37d07a=_0x25ae16[0x1];_0x4de96b[_0x4c0e89(_0x5f4a6f._0x1ad321)](_0x37d07a);}});if(_0x4de96b[_0x324188(_0x1d935f._0xc2bf3f)]>0x0)_0x3b1d8a=_0x4de96b[0x0],console[_0x324188(_0x1d935f._0x4ca96f)](_0x324188(_0x1d935f._0x363dc8),_0x3b1d8a),await _0x391b04(_0x3b1d8a);else{console['log']('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x324188(_0x1d935f._0x28a395)](path[_0x324188(0x235)](FILE_PATH,_0x324188(_0x1d935f._0x12bd82)));async function _0x581567(){const _0x11d788=_0x324188;try{process['platform']===_0x11d788(_0x22c911._0x5902db)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x11d788(_0x22c911._0x57e120)):await exec(_0x11d788(_0x22c911._0x164613)+botName[_0x11d788(0x28a)](0x0)+']'+botName[_0x11d788(0x218)](0x1)+_0x11d788(0x1e3));}catch(_0x410d2b){}}_0x581567(),await new Promise(_0x525ad4=>setTimeout(_0x525ad4,0xbb8));const _0x100da0=_0x324188(0x209)+FILE_PATH+_0x324188(_0x1d935f._0x4a7913)+ARGO_PORT;try{await exec(_0x324188(0x1ea)+botPath+'\x20'+_0x100da0+_0x324188(_0x1d935f._0xb88d50)),console['log'](botName+_0x324188(_0x1d935f._0x3901c4)),await new Promise(_0x2454b4=>setTimeout(_0x2454b4,0xbb8)),await extractDomains();}catch(_0x42f20c){console[_0x324188(0x22a)]('Error\x20executing\x20command:\x20'+_0x42f20c);}}}catch(_0x2276c6){console[_0x324188(0x22a)](_0x324188(0x212),_0x2276c6);}async function _0x3bc099(){const _0x173037=_0x324188;try{const _0x31e0e4=await axios[_0x173037(0x200)](_0x173037(_0x5d4b62._0x591ad4),{'timeout':0xbb8});if(_0x31e0e4[_0x173037(0x24e)]&&_0x31e0e4['data'][_0x173037(0x267)]&&_0x31e0e4['data'][_0x173037(_0x5d4b62._0x163652)])return _0x31e0e4[_0x173037(0x24e)][_0x173037(0x267)]+'_'+_0x31e0e4[_0x173037(0x24e)][_0x173037(0x251)];}catch(_0x23bd4e){try{const _0x10587f=await axios[_0x173037(_0x5d4b62._0x18dcb1)](_0x173037(_0x5d4b62._0x597b11),{'timeout':0xbb8});if(_0x10587f[_0x173037(0x24e)]&&_0x10587f[_0x173037(0x24e)]['status']===_0x173037(0x206)&&_0x10587f['data'][_0x173037(0x223)]&&_0x10587f[_0x173037(_0x5d4b62._0x5be05d)][_0x173037(_0x5d4b62._0x15f113)])return _0x10587f['data'][_0x173037(0x223)]+'_'+_0x10587f[_0x173037(0x24e)][_0x173037(0x251)];}catch(_0x45c6f0){}}return _0x173037(0x20d);}async function _0x391b04(_0x581973){const _0x180cbb={_0x3a71c2:0x216,_0x523a44:0x244,_0x2788b9:0x1d5,_0x5bc440:0x1fe,_0x782da5:0x217,_0x415f7c:0x1eb,_0xfcc2ff:0x21a,_0x55bf50:0x1dc,_0x175540:0x1eb,_0x46b91a:0x1fa},_0x301b9d=await _0x3bc099(),_0x537bd8=NAME?NAME+'-'+_0x301b9d:_0x301b9d;return new Promise(_0x871f4d=>{const _0x42bd52={_0x58ebac:0x289};setTimeout(()=>{const _0x1dbfb3=_0x5d3b,_0x44efa3={'v':'2','ps':''+_0x537bd8,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x581973,'path':_0x1dbfb3(_0x180cbb._0x3a71c2),'tls':_0x1dbfb3(0x270),'sni':_0x581973,'alpn':'','fp':_0x1dbfb3(0x24c)},_0x30da00='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x581973+_0x1dbfb3(_0x180cbb._0x523a44)+_0x581973+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x537bd8+_0x1dbfb3(_0x180cbb._0x2788b9)+Buffer[_0x1dbfb3(0x1dc)](JSON[_0x1dbfb3(0x1db)](_0x44efa3))[_0x1dbfb3(0x1eb)](_0x1dbfb3(_0x180cbb._0x5bc440))+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x1dbfb3(0x21f)+_0x581973+_0x1dbfb3(0x244)+_0x581973+_0x1dbfb3(0x28e)+_0x537bd8+'\x0a\x20\x20\x20\x20';console[_0x1dbfb3(_0x180cbb._0x782da5)](Buffer[_0x1dbfb3(0x1dc)](_0x30da00)[_0x1dbfb3(_0x180cbb._0x415f7c)](_0x1dbfb3(0x1fe))),fs[_0x1dbfb3(_0x180cbb._0xfcc2ff)](subPath,Buffer[_0x1dbfb3(_0x180cbb._0x55bf50)](_0x30da00)[_0x1dbfb3(_0x180cbb._0x175540)](_0x1dbfb3(0x1fe))),console[_0x1dbfb3(_0x180cbb._0x782da5)](FILE_PATH+_0x1dbfb3(_0x180cbb._0x46b91a)),uploadNodes(),app[_0x1dbfb3(0x200)]('/'+SUB_PATH,(_0x145ab6,_0x47f2c3)=>{const _0x3e98d4=_0x1dbfb3,_0x3dda25=Buffer[_0x3e98d4(0x1dc)](_0x30da00)[_0x3e98d4(0x1eb)](_0x3e98d4(0x1fe));_0x47f2c3[_0x3e98d4(0x22d)](_0x3e98d4(0x23b),_0x3e98d4(_0x42bd52._0x58ebac)),_0x47f2c3['send'](_0x3dda25);}),_0x871f4d(_0x30da00);},0x7d0);});}}async function uploadNodes(){const _0x31cf6b={_0x3364b9:0x1f5,_0x28adae:0x1ff,_0xe4bb67:0x249,_0x5c6a5c:0x217,_0x589de1:0x1e7},_0x1cf161=_0x545c7c;if(UPLOAD_URL&&PROJECT_URL){const _0x367a19=PROJECT_URL+'/'+SUB_PATH,_0x14d7a4={'subscription':[_0x367a19]};try{const _0x4d8148=await axios[_0x1cf161(0x1ff)](UPLOAD_URL+_0x1cf161(0x25a),_0x14d7a4,{'headers':{'Content-Type':'application/json'}});return _0x4d8148&&_0x4d8148['status']===0xc8?(console[_0x1cf161(0x217)]('Subscription\x20uploaded\x20successfully'),_0x4d8148):null;}catch(_0x2f64a4){if(_0x2f64a4[_0x1cf161(_0x31cf6b._0x3364b9)]){if(_0x2f64a4[_0x1cf161(0x1f5)][_0x1cf161(0x249)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x12cd80=fs[_0x1cf161(0x1e6)](listPath,_0x1cf161(0x1f2)),_0x143158=_0x12cd80[_0x1cf161(0x213)]('\x0a')['filter'](_0x5b1ec8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x5b1ec8));if(_0x143158['length']===0x0)return;const _0x16445d=JSON[_0x1cf161(0x1db)]({'nodes':_0x143158});try{const _0x47d019=await axios[_0x1cf161(_0x31cf6b._0x28adae)](UPLOAD_URL+'/api/add-nodes',_0x16445d,{'headers':{'Content-Type':_0x1cf161(0x23d)}});return _0x47d019&&_0x47d019[_0x1cf161(_0x31cf6b._0xe4bb67)]===0xc8?(console[_0x1cf161(_0x31cf6b._0x5c6a5c)](_0x1cf161(_0x31cf6b._0x589de1)),_0x47d019):null;}catch(_0x578f45){return null;}}else return;}}function cleanFiles(){const _0x18078f={_0x3a443d:0x233,_0x480950:0x23a,_0x29c040:0x235,_0x5a9397:0x1f6},_0x3600e8={_0x1d373d:0x27e};setTimeout(()=>{const _0x2ed717=_0x5d3b,_0x2514c9=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2514c9['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2514c9[_0x2ed717(0x250)](phpPath);process[_0x2ed717(_0x18078f._0x3a443d)]===_0x2ed717(0x1d9)?exec(_0x2ed717(0x1da)+_0x2514c9[_0x2ed717(0x235)]('\x20')+_0x2ed717(0x274),_0x172cc2=>{const _0x8e821=_0x2ed717;console[_0x8e821(0x280)](),console['log'](_0x8e821(_0x3600e8._0x1d373d)),console[_0x8e821(0x217)](_0x8e821(0x20e));}):exec(_0x2ed717(_0x18078f._0x480950)+_0x2514c9[_0x2ed717(_0x18078f._0x29c040)]('\x20')+_0x2ed717(_0x18078f._0x5a9397),_0x3b178b=>{const _0x2a6d1d=_0x2ed717;console[_0x2a6d1d(0x280)](),console['log']('App\x20is\x20running'),console[_0x2a6d1d(0x217)](_0x2a6d1d(0x20e));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x5bac75={_0x23dd73:0x232,_0x45e0e9:0x23d,_0x134fea:0x22a},_0x52c217=_0x545c7c;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x52c217(0x217)](_0x52c217(0x297));return;}try{const _0x465459=await axios['post'](_0x52c217(_0x5bac75._0x23dd73),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x52c217(_0x5bac75._0x45e0e9)}});return console[_0x52c217(0x217)](_0x52c217(0x25d)),_0x465459;}catch(_0x1566c5){return console[_0x52c217(_0x5bac75._0x134fea)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x1566c5[_0x52c217(0x240)]),null;}}async function startserver(){const _0x2b7bb1={_0x32cd8f:0x22a},_0x2cef85=_0x545c7c;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x557905){console[_0x2cef85(_0x2b7bb1._0x32cd8f)](_0x2cef85(0x263),_0x557905);}}function _0x5978(){const _0x26ea1a=['toString','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','has','\x20-c\x20\x22','ARGO_DOMAIN:','list.txt','UPLOAD_URL','utf-8','vmess','Unhandled\x20error\x20in\x20startserver:','response','\x20>/dev/null\x202>&1','NEZHA_PORT','https://arm64.ssss.nyc.mn/bot','/trojan-argo','/sub.txt\x20saved\x20successfully','\x0aclient_secret:\x20','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','express','base64','post','get','\x20>/dev/null\x202>&1\x20&','tunnel.json','78947mAwcvV','forEach','SERVER_PORT','success','exec','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','unlinkSync','pipe','987d9e79-8044-4258-bfda-2a59063312f4','Unknown','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','2QPYSDl','2053','7lcHRsa','Error\x20reading\x20boot.log:','split','TunnelSecret','random','/vmess-argo?ed=2560','log','substring','aarch64','writeFileSync','/vless-argo','catch','boot.log','basename','?security=tls&sni=','Download\x20','util','PORT','countryCode','existsSync','https+local://8.8.8.8/dns-query','8443','18329iziVGW','https://ipapi.co/json/','statSync','error','direct','4614582FwseHz','set','true','https://amd64.ssss.nyc.mn/bot','http','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','https://oooo.serv00.net/add-url','platform','path','join','33.663899.xyz','includes','trojan','/api/delete-nodes','rm\x20-rf\x20','Content-Type','https://amd64.ssss.nyc.mn/agent','application/json','filter','arm','message','./tmp','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','mkdirSync','&fp=firefox&type=ws&host=','arm64','\x20is\x20running','\x20failed:\x20','all','status','https://arm64.ssss.nyc.mn/v1','pkill\x20-f\x20\x22[','firefox','NEZHA_SERVER','data','config.json','push','org','map','\x20already\x20exists','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','abcdefghijklmnopqrstuvwxyz','https://amd64.ssss.nyc.mn/web','tunnel.yml','9sRNjJS','stream','/api/add-subscriptions','ArgoDomain:','CFPORT','automatic\x20access\x20task\x20added\x20successfully','child_process','listen','ARGO_AUTH','https://arm64.ssss.nyc.mn/web','443','Error\x20in\x20startserver:','https://amd64.ssss.nyc.mn/v1','isFile','.exe\x20>\x20nul\x202>&1','country_code','test','832736IYvWwi','quic','http://ip-api.com/json/','Error\x20downloading\x20files:','--tls','60erOyGn','NEZHA_KEY','tls','/dev/null','vless','config.yaml','\x20>\x20nul\x202>&1','finish','env','\x20-s\x20','8063830vNUMvP','freedom','send','pop','\x20-p\x20','fileName','App\x20is\x20running','2083','clear','UUID','block','742025TrclYY','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','ARGO_PORT','mengchuan','2096','NAME','text/plain;\x20charset=utf-8','charAt','2087','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','arch','&path=%2Ftrojan-argo%3Fed%3D2560#','match','tcp','127.0.0.1','chmod','https://arm64.ssss.nyc.mn/agent','unshift','NEZHA\x20variable\x20is\x20empty,skip\x20running','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','Skipping\x20adding\x20automatic\x20access\x20task','\x0a\x0avmess://','Hello\x20world!','\x0a\x20\x20credentials-file:\x20','false','win32','del\x20/f\x20/q\x20','stringify','from','readdirSync','8bdTiIW','sub.txt','axios','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','none','\x22\x20>\x20/dev/null\x202>&1','521430LXPgbI','length','readFileSync','Nodes\x20uploaded\x20successfully','/vmess-argo','web\x20running\x20error:\x20','nohup\x20'];_0x5978=function(){return _0x26ea1a;};return _0x5978();}startserver()[_0x545c7c(0x21c)](_0xc049d1=>{const _0x2bfaa0={_0x26be2a:0x22a},_0x206152=_0x545c7c;console[_0x206152(_0x2bfaa0._0x26be2a)](_0x206152(0x1f4),_0xc049d1);}),app[_0x545c7c(0x25f)](PORT,()=>console[_0x545c7c(0x217)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
